<!DOCTYPE html>
<html>
    <head>
        <script src="node_modules/requirejs/require.js"></script>

        <style>
            .red {
                color: red;
            }
            .blue {
                color: blue;
            }
        </style>

        <script>
            requirejs.config({
                baseUrl: 'src'
            });
        </script>

        <script>

            //create a Sumo router
            define('router', ['./main'], function(sumo){
                return sumo.create({
                    mixins: ['router'],
                    routes: {
                        '#test': function(){
                            alert('routed!');
                        }
                    }
                });
            });

            define('app', ['./main'], function(sumo){
                //use require.js, return a sumo object
                return sumo.create({
                    tag: 'my-element',
                    name: 'demoApp',
                    classes: 'demo',
                    mixins: ['webcomponent'],
                    content: 'I love JavaScript',
                    template: '<div class="red"><%=content%></div>'
                });
            });

            define('app2', ['./main'], function(sumo){
                //use require.js, return a sumo object
                return sumo.create({
                    tag: 'my-new-element',
                    name: 'demoApp',
                    classes: 'demo',
                    mixins: ['webcomponent'],
                    content: 'WHOA',
                    template: '<div class="blue"><%=content%></div>'
                });
            });


            //urls are relative for dev mode
            requirejs(['app', 'app2', 'router'], function (app, app2, router) {

                //create an intance of the router
                var _router = new router();

                //create a new version of the app
                //add some properties to the app when constructed
                var _app = new app();
                var _app2 = new app2();

                //do some javascript when the app has loaded
                _app.ready(function(){

                    _app.register();
                    _app2.register();

                });
            });

        </script>
    </head>

    <body>
        <my-element id="test">
            <my-new-element></my-new-element>
        </my-element>
    </body>

</html>